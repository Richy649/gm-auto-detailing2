/* Montserrat everywhere */
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap');

/* ======= Design Tokens (non-invasive) ======= */
:root {
  /* Base palette (kept from your file) */
  --gm-bg: #ffffff;
  --gm-card: #ffffff;
  --gm-border: #e3e0d7;
  --gm-text: #111111;
  --gm-muted: #686868;
  --gm-accent: #222222;
  --gm-green: #23a35a;
  --gm-orange: #e39b24;
  --gm-off: #b9b9b9;
  --gm-brown: #5b3b1e;

  /* Additions for consistency */
  --gm-radius-s: 10px;
  --gm-radius-m: 12px;
  --gm-radius-l: 16px;
  --gm-shadow-1: 0 2px 8px rgba(0,0,0,0.04);
  --gm-shadow-2: 0 2px 10px rgba(0,0,0,0.06);
  --gm-ring: 2px;
  --gm-ring-color: rgba(35,163,90,0.35); /* green focus ring */
  --gm-transition-fast: 150ms;
  --gm-transition-mid: 220ms;

  /* Typographic scale */
  --gm-fs-xs: 12px;
  --gm-fs-sm: 14px;
  --gm-fs-md: clamp(14px, 1.6vw, 16px);
  --gm-fs-lg: clamp(18px, 2.8vw, 20px);
  --gm-fs-xl: clamp(20px, 3.4vw, 22px);

  /* Touch sizing */
  --gm-hit: 44px;     /* min recommended finger target */
  --gm-hit-lg: 56px;

  /* iOS safe areas */
  --gm-safe-top: env(safe-area-inset-top, 0px);
  --gm-safe-bottom: env(safe-area-inset-bottom, 0px);
}

/* ======= Global base ======= */
*,
*::before,
*::after { box-sizing: border-box; }

html, body {
  margin: 0; padding: 0;
  background: var(--gm-bg);
  color: var(--gm-text);
  font-family: 'Montserrat', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight: 400;
  font-size: var(--gm-fs-md);
  line-height: 1.4;
  -webkit-text-size-adjust: 100%;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  caret-color: var(--gm-accent);
}

/* Remove iOS tap highlight */
a, button { -webkit-tap-highlight-color: transparent; }

/* Motion safety */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; scroll-behavior: auto !important; }
}

/* ======= Layout wrappers ======= */
.gm.wrap { padding: 14px 14px calc(14px + var(--gm-safe-bottom)); padding-top: calc(14px + var(--gm-safe-top)); }
.gm.panel { background: var(--gm-card); border: 1px solid var(--gm-border); border-radius: var(--gm-radius-m); padding: 14px; box-shadow: var(--gm-shadow-1); overflow: hidden; }
.gm.panel.wider { max-width: 980px; margin: 0 auto; }

/* ======= Headings & text ======= */
.gm.h2 { font-weight: 600; font-size: var(--gm-fs-lg); margin: 6px 0 12px; }
.gm.h2.center { text-align: center; }
.gm.muted { color: var(--gm-muted); font-size: var(--gm-fs-sm); }

.gm.logo-big { width: 160px; height: auto; object-fit: contain; }

/* ======= Services ======= */
.gm.cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px,1fr)); gap: 12px; }
.gm.card {
  border: 1px solid var(--gm-border);
  background: #fff;
  border-radius: var(--gm-radius-m);
  padding: 12px;
  cursor: pointer;
  transition: box-shadow var(--gm-transition-fast), border-color var(--gm-transition-fast), background var(--gm-transition-fast), transform var(--gm-transition-fast);
  will-change: transform;
}
.gm.card:hover { box-shadow: var(--gm-shadow-2); transform: translateY(-1px); }
.gm.card:active { transform: translateY(0); }
.gm.card.selected { background: #e9f8f0; border-color: var(--gm-green); box-shadow: inset 0 0 0 2px var(--gm-green); }
.gm.card-title { font-weight: 600; margin-bottom: 6px; }
.gm.price-row { display: flex; align-items: baseline; gap: 10px; }
.gm.price-now { font-weight: 700; font-size: 18px; }
.gm.price-strike { color: #b00000; text-decoration: line-through; opacity: 0.85; }

/* ======= Add-ons ======= */
.gm.addon-benefits.two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.gm.benefit {
  border: 1px dashed var(--gm-border);
  border-radius: var(--gm-radius-m);
  padding: 12px;
  background: #fff;
  transition: box-shadow var(--gm-transition-fast), border-color var(--gm-transition-fast), background var(--gm-transition-fast);
}
.gm.benefit:hover { box-shadow: var(--gm-shadow-2); }
.gm.benefit.on { border-style: solid; background: #e9f8f0; border-color: var(--gm-green); box-shadow: inset 0 0 0 2px var(--gm-green); }
.benefit-title { display: flex; justify-content: space-between; font-weight: 600; margin-bottom: 4px; }
.benefit-copy { font-size: var(--gm-fs-sm); color: var(--gm-muted); margin-bottom: 8px; }
.benefit-actions { display: flex; }
.benefit-actions.left { justify-content: flex-start; }
.benefit-actions.right { justify-content: flex-end; }

/* ======= Actions ======= */
.gm.actions { display: grid; grid-template-columns: 1fr auto; gap: 10px; align-items: center; }
.gm.actions.end { grid-template-columns: 1fr auto; }
.gm.actions.space { grid-template-columns: auto 1fr auto; }
.bottom-stick { margin-top: 14px; }

/* ======= Buttons ======= */
.gm.btn {
  border: 1px solid var(--gm-border);
  background: #fff;
  border-radius: var(--gm-radius-s);
  padding: 10px 16px;
  cursor: pointer;
  font-weight: 700;
  line-height: 1;
  min-height: var(--gm-hit);
  transition: background var(--gm-transition-fast), border-color var(--gm-transition-fast), box-shadow var(--gm-transition-fast), transform var(--gm-transition-fast);
}
.gm.btn:hover { box-shadow: var(--gm-shadow-2); transform: translateY(-1px); }
.gm.btn:active { transform: translateY(0); }
.gm.btn.nav { padding: 8px 12px; min-height: 40px; } /* compact, still reachable */
.gm.btn:disabled { opacity: 0.45; cursor: not-allowed; box-shadow: none; transform: none; }
.gm.btn.primary { background: var(--gm-accent); color: #fff; border-color: var(--gm-accent); }
.gm.btn.primary:hover { filter: brightness(1.03); }

/* Accessible focus outline for keyboard users only */
.gm.btn:focus { outline: none; }
.gm.btn:focus-visible,
.gm.daycell:focus-visible,
.gm.timebox:focus-visible,
.gm.card:focus-visible {
  outline: none;
  box-shadow: 0 0 0 var(--gm-ring) var(--gm-ring-color), var(--gm-shadow-2);
  border-color: color-mix(in oklab, var(--gm-green) 65%, var(--gm-border));
}

/* ======= Confirm ======= */
.gm.twocol { display: grid; grid-template-columns: 1fr 320px; gap: 12px; }
.gm.total { font-size: 22px; font-weight: 700; }

/* ======= Calendar header ======= */
.gm.monthbar-grid { display: grid; grid-template-columns: auto 1fr auto; align-items: center; margin-bottom: 8px; column-gap: 8px; }
.gm.monthtitle { text-align: center; font-weight: 600; font-size: 18px; }

/* ======= Counters ======= */
.gm.counter { padding: 6px 12px; border-radius: 999px; font-weight: 700; background:#fafafa; border:1px solid var(--gm-border); }

/* ======= Weekday row ======= */
.gm.dowgrid { display: grid; grid-template-columns: repeat(7,1fr); gap: 6px; margin-bottom: 6px; }
.gm.dow { text-align: center; font-weight: 600; font-size: var(--gm-fs-xs); color: var(--gm-muted); letter-spacing: 0.02em; }

/* ======= Calendar grid ======= */
.gm.monthgrid { display: grid; grid-template-columns: repeat(7,1fr); gap: 6px; }
.gm.dayblank { height: var(--gm-hit); }
.gm.daywrap { position: relative; }
.gm.daycell {
  width: 100%;
  height: var(--gm-hit);
  border-radius: var(--gm-radius-s);
  border: 1px solid var(--gm-border);
  background: #fff;
  color: var(--gm-brown);
  font-weight: 700;
  transition: background var(--gm-transition-fast), box-shadow var(--gm-transition-fast), border-color var(--gm-transition-fast), transform var(--gm-transition-fast);
}
.gm.daycell:hover:not(:disabled) { box-shadow: var(--gm-shadow-2); transform: translateY(-1px); }
.gm.daycell:active:not(:disabled) { transform: translateY(0); }
.gm.daycell.has { border-color: #c7bea8; }
.gm.daycell.off { background: #eeeeee; color: #9a9a9a; opacity: 0.7; filter: grayscale(0.3); cursor: not-allowed; }
.gm.daycell.selected-green { background: #e9f8f0; border-color: var(--gm-green); color: #0b6b37; box-shadow: inset 0 0 0 2px var(--gm-green); }
.gm.daycell.selected-orange { background: #fff6e8; border-color: var(--gm-orange); color: #7a4a00; box-shadow: inset 0 0 0 2px var(--gm-orange); }

/* ======= Times ======= */
.gm.timegrid { display: grid; grid-template-columns: repeat(auto-fit, minmax(110px,1fr)); gap: 10px; margin-top: 8px; }
.gm.timebox-wrap { position: relative; }
.gm.timebox {
  width: 100%;
  height: var(--gm-hit-lg);
  border-radius: var(--gm-radius-m);
  border: 1px solid var(--gm-border);
  background: #fff;
  font-weight: 800;
  font-size: 16px;
  transition: background var(--gm-transition-fast), border-color var(--gm-transition-fast), box-shadow var(--gm-transition-fast), transform var(--gm-transition-fast);
}
.gm.timebox:hover:not(:disabled) { box-shadow: var(--gm-shadow-2); transform: translateY(-1px); }
.gm.timebox:active:not(:disabled) { transform: translateY(0); }
.gm.timebox-on { background: #e9f8f0; border-color: var(--gm-green); color: #0b6b37; box-shadow: inset 0 0 0 2px var(--gm-green); }
.gm.timebox-off { background: #efefef; color: #9a9a9a; border-color: #d0d0d0; cursor: not-allowed; }

/* ======= Alerts ======= */
.gm.alert {
  background: #fff7e6;
  border: 1px solid #ffe1b0;
  color: #7a4a00;
  padding: 10px 12px;
  border-radius: var(--gm-radius-s);
  margin: 8px 0;
}

/* ======= Responsive ======= */
@media (max-width: 740px) {
  .gm.panel.wider { margin: 0 6px; }
  .gm.twocol { grid-template-columns: 1fr; }
  .gm.addon-benefits.two-col { grid-template-columns: 1fr; }
  .gm.price-now { font-size: 17px; }
  .gm.monthtitle { font-size: 17px; }
}

/* Slightly larger touch targets and headings on very small devices */
@media (max-width: 380px) {
  .gm.btn { padding: 12px 14px; }
  .gm.dayblank,
  .gm.daycell { height: calc(var(--gm-hit) + 4px); }
  .gm.timebox { height: calc(var(--gm-hit-lg) + 4px); }
}

/* ======= High-contrast focus fallback (older browsers) ======= */
@supports not (color: color-mix(in oklab, white, black)) {
  .gm.btn:focus-visible,
  .gm.daycell:focus-visible,
  .gm.timebox:focus-visible,
  .gm.card:focus-visible {
    box-shadow: 0 0 0 var(--gm-ring) rgba(35,163,90,0.45), var(--gm-shadow-2);
    border-color: var(--gm-green);
  }
}
